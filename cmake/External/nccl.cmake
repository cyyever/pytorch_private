include_guard()

if(USE_SYSTEM_NCCL)
  find_package(PkgConfig REQUIRED)
  pkg_search_module(nccl REQUIRED IMPORTED_TARGET nccl)
  if(nccl_FOUND)
    add_library(__caffe2_nccl INTERFACE)
    target_link_libraries(__caffe2_nccl INTERFACE PkgConfig::nccl)
  endif()
else()
  message(FATAL_ERROR "USE_SYSTEM_NCCL is off")
endif()
